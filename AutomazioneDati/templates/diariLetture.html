{% extends 'base_layout.html' %}
{% load static %}

{% block extra_css %}
    <!-- Inclusione del CSS personalizzato per il Diario delle Letture -->
    <link rel="stylesheet" href="{% static 'css/diariLetture.css' %}">
    <!-- Inclusione del CSS per Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
{% endblock extra_css %}

{% block content %}
<div class="container">
    <div class="header-bar">
        <div class="header-title">
            {{ impianto.nome_impianto }}
        </div>
        <div class="dropdown-container">
            <select id="year-select" class="custom-select">
                <option value="2021">2021</option>
                <option value="2022">2022</option>
                <option value="2023">2023</option>
                <option value="2024" selected>2024</option>
                <option value="2025">2025</option>
            </select>
        </div>
    </div>
    
    <!-- Wrapper per la navigazione tra le tabelle -->
    <div class="table-switcher-wrapper">
        <!-- Icona per navigare alla tabella precedente -->
        <i class="bi bi-arrow-left-circle-fill nav-arrow left-arrow" onclick="switchTable(-1)"></i>
        
        <div class="table-container table-responsive">
            <!-- Prima tabella -->
            <div id="table1" class="table-content">
                <table class="table table-bordered table-sm">
                    <colgroup>
                        <col style="width: 10%;">
                        <col style="width: 10%;">
                        <col style="width: 10%;">
                        <col style="width: 10%;">
                        <col style="width: 10%;">
                        <col style="width: 10%;">
                        <col style="width: 10%;">
                        <col style="width: 10%;">
                        <col style="width: 10%;">
                        <col style="width: 10%;">
                    </colgroup>
                    <thead>
                        <tr>
                            <th rowspan="2">Mese</th>
                            <th colspan="3">Prodotta</th>
                            <th colspan="3">Prelevata</th>
                            <th colspan="3">Immessa</th>
                        </tr>
                        <tr>
                            <th>Campo</th>
                            <th>e-D</th>
                            <th>G.S.E</th>
                            <th>Campo</th>
                            <th>e-D</th>
                            <th>G.S.E</th>
                            <th>Campo</th>
                            <th>e-D</th>
                            <th>GSE</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for i in num_rows %}
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            
            <!-- Seconda tabella -->
            <div id="table2" class="table-content" style="display: none;">
                <table class="table table-bordered table-sm">
                    <thead>
                        <tr>
                            <th>Mese</th>
                            <th>Data di presa</th>
                            <th>A1-</th>
                            <th>A2-</th>
                            <th>A3-</th>
                            <th>A1+</th>
                            <th>A2+</th>
                            <th>A3+</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for i in num_rows %}
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Icona per la navigazione alla tabella successiva -->
        <i class="bi bi-arrow-right-circle-fill nav-arrow right-arrow" onclick="switchTable(1)"></i>
    </div>
    
    <!-- Aggiungiamo il pulsante "Salva" -->
    <div class="save-button-container">
        <button id="save-button">Salva</button>
    </div>
</div>
{% endblock content %}

{% block extra_js %}
    <script src="{% static 'js/script.js' %}"></script>
    <script>
        // Codice JavaScript per la navigazione tra le tabelle
        document.addEventListener('DOMContentLoaded', function() {
            let currentIndex = 0;
            const tables = [
                document.getElementById("table1"),
                document.getElementById("table2")
            ];
            
            window.switchTable = function(delta) {
                currentIndex = (currentIndex + delta + tables.length) % tables.length;
                tables.forEach((table, index) => {
                    table.style.display = (index === currentIndex) ? "block" : "none";
                });
            };
        });
    </script>
{% endblock extra_js %}
