{% load static %}
<style>
	/* Stili per la tabella del report mensile */
	#table2_{{ anno }} {
	  border-collapse: collapse;
	  width: 100%;
	  border-radius: 8px;
	  overflow: hidden;
	  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
	  background: rgba(255, 255, 255, 0.9);
	  backdrop-filter: blur(5px);
	  -webkit-backdrop-filter: blur(5px);
	  margin-bottom: 20px;
	}
	
	#table2_{{ anno }} thead {
	  background-color: #518ffa;
	  color: white;
	}
	
	#table2_{{ anno }} th {
	  padding: 12px 8px;
	  text-align: center;
	  font-weight: 500;
	  border: 1px solid #e0e0e0;
	  min-width: 80px; /* Larghezza minima per le intestazioni */
	}
	
	#table2_{{ anno }} tbody tr:nth-child(even) {
	  background-color: #f5f8ff;
	}
	
	#table2_{{ anno }} tbody tr:hover {
	  background-color: #e5f1ff;
	  transition: background-color 0.2s ease;
	}
	
	#table2_{{ anno }} td {
	  padding: 8px;
	  border: 1px solid #e0e0e0;
	  text-align: center;
	  min-width: 80px; /* Larghezza minima standard per le celle */
	  height: 40px; /* Altezza predefinita per le celle */
	}
	
	#table2_{{ anno }} td:first-child {
	  font-weight: 500;
	  background-color: #f1f1f1;
	  min-width: 100px; /* Larghezza specifica per la colonna del mese */
	}
	
	/* Stile per le celle numeriche */
	#table2_{{ anno }} td:not(:first-child):not(:nth-last-child(-n+2)) {
	  width: 80px; /* Larghezza fissa per le celle con valori numerici */
	}
	
	/* Stile per la colonna di controllo */
	#table2_{{ anno }} td.controllo {
	  width: 120px; /* Larghezza maggiore per la colonna di controllo */
	}
	
	#table2_{{ anno }} tfoot {
	  background-color: #f1f1f1;
	  font-weight: bold;
	}
	
	#table2_{{ anno }} tfoot td {
	  padding: 8px;
	  border: 1px solid #e0e0e0;
	}
	
	#table2_{{ anno }} i.fa {
	  margin-right: 4px;
	}
	
	/* Stile per la riga del totale annuale */
	#table2_{{ anno }} tfoot tr:first-child {
	  font-weight: bold;
	  background-color: #d3e5ff;
	}
	
	/* Note a pi√® di pagina */
	#table2_{{ anno }} tfoot tr:last-child td {
	  font-size: 0.85em;
	  color: #555;
	  font-style: italic;
	}
  </style>
  
<div class="js-tabella-data" 
     data-anno="{{ anno }}" 
     data-nickname="{{ nickname }}" 
     style="display: none;"></div>

<table id="table2_{{ anno }}" class="display compact" style="width:100%;">
  <thead>
    <tr data-dt-order="disable">
      
      <th rowspan="2" data-dt-order="disable"> Mese </th>
      <th colspan="3" data-dt-order="disable" style="text-align: center" > Misure campo (kWh) </th>
      <th colspan="3" data-dt-order="disable" style="text-align: center"> Misure e-Dist (kWh) </th>
      <th colspan="2" data-dt-order="disable" style="text-align: center"> Misure GSE (kWh) </th>
      <th rowspan="2" colspan="2" data-dt-order="disable" style="text-align: center; width: 25%"> Controllo misure</th>
	    
    </tr>
    <tr data-dt-order="disable">
      <th>prodotta</th>
      <th>immessa</th>
      <th>prelevata</th>
      <th>prodotta</th>
      <th>immessa</th>
      <th>prelevata</th>
      <th>prodotta</th>
      <th>immessa</th>
    </tr>
  </thead>
  <tbody>
    <!-- I dati verranno popolati dinamicamente tramite JavaScript -->
    {% for mese in '12345678910111213'|make_list|slice:':12' %}
    <tr>
     
      <td class="mese" data-mese="{{ forloop.counter }}"></td>
      <td class="prod-campo" data-mese="{{ forloop.counter }}"></td>
      <td class="imm-campo" data-mese="{{ forloop.counter }}"></td>
      <td class="prel-campo" data-mese="{{ forloop.counter }}"></td>
      <td class="prod-ed" data-mese="{{ forloop.counter }}"></td>
      <td class="imm-ed" data-mese="{{ forloop.counter }}"></td>
      <td class="prel-ed" data-mese="{{ forloop.counter }}"></td>
      <td class="prod-gse" data-mese="{{ forloop.counter }}"></td>
      <td class="imm-gse" data-mese="{{ forloop.counter }}"></td>
      <td class="controllo" data-mese="{{ forloop.counter }}"></td>
      <td></td>
    </tr>
    {% endfor %}
  </tbody>
  <tfoot>
    <tr>
      
      <td><b>Anno</b></td>
      <td class="totale-prod-campo"></td>
      <td class="totale-imm-campo"></td>
      <td class="totale-prel-campo"></td>
      <td class="totale-prod-ed"></td>
      <td class="totale-imm-ed"></td>
      <td class="totale-prel-ed"></td>
      <td class="totale-prod-gse"></td>
      <td class="totale-imm-gse"></td>
	  <td></td>
	  <td></td>

    </tr>
    <tr>
      
      <td colspan="3"><sup>*</sup><i class="fa fa-bolt" aria-hidden="true"></i>&nbsp;<i>Delta percentuale di produzione</i></td>
      <td></td>
      <td colspan="3"><sup>*</sup><i class="fa fa-share" aria-hidden="true" ></i>&nbsp;<i>Delta percentuale di immissione</i></td>
      <td></td>
      <td></td>
      <td></td>
	  <td></td>
     
    </tr>
  </tfoot>
</table>

<div class="text-center mt-3">
  <button id="refresh-table2-data-{{ anno }}" class="btn btn-secondary">Aggiorna Dati</button>
</div>

<!-- Alert per messaggi di caricamento -->
<div id="loading-alert-{{ anno }}" class="alert alert-info mt-3" style="display: none;" role="alert">
  Caricamento dati in corso...
</div>
<div id="success-table2-alert-{{ anno }}" class="alert alert-success mt-3" style="display: none;" role="alert">
  Dati caricati con successo!
</div>
<div id="error-table2-alert-{{ anno }}" class="alert alert-danger mt-3" style="display: none;" role="alert">
  Errore durante il caricamento dei dati.
</div>

<!-- Script JavaScript per il caricamento dinamico dei dati -->
{% block extra_js %}
<script src="{% static 'js/tabellamisure.js' %}"></script>
{% endblock %}