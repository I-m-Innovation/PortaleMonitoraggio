{% load static %}
<style>
  /* Stili per la tabella del report mensile */
  #table1_{{ anno }} {
    border-collapse: collapse;
    width: 100%;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    margin-bottom: 20px;
  }
  
  #table1_{{ anno }} thead {
    background-color: #518ffa;
    color: white;
  }
  
  #table1_{{ anno }} th {
    padding: 12px 8px;
    text-align: center;
    font-weight: 500;
    border: 1px solid #e0e0e0;
  }
  
  #table1_{{ anno }} tbody tr:nth-child(even) {
    background-color: #f5f8ff;
  }
  
  #table1_{{ anno }} tbody tr:hover {
    background-color: #e5f1ff;
    transition: background-color 0.2s ease;
  }
  
  #table1_{{ anno }} td {
    padding: 8px;
    border: 1px solid #e0e0e0;
    text-align: center;
  }
  
  #table1_{{ anno }} td:first-child {
    font-weight: 500;
    background-color: #f1f1f1;
  }
  
  #table1_{{ anno }} tfoot {
    background-color: #f1f1f1;
    font-weight: bold;
  }
  
  #table1_{{ anno }} tfoot td {
    padding: 8px;
    border: 1px solid #e0e0e0;
  }
  
  #table1_{{ anno }} i.fa {
    margin-right: 4px;
  }
  
  /* Stile per la riga del totale annuale */
  #table1_{{ anno }} tfoot tr:first-child {
    font-weight: bold;
    background-color: #d3e5ff;
  }
  
  /* Note a pi√® di pagina */
  #table1_{{ anno }} tfoot tr:last-child td {
    font-size: 0.85em;
    color: #555;
    font-style: italic;
  }
</style>

<table id="table1_{{ anno }}" class="display compact" style="width:100%; ">
	<thead>
		<tr data-dt-order="disable">
			
      <th rowspan="2" > Mese </th>
      <th rowspan="2" style="text-align: center" > <i class="fa fa-bolt" aria-hidden="true"></i>&nbsp;Energia<sup>*</sup><br>(kWh) </th>
      <th colspan="2" style="text-align: center" > <i class="fa fa-line-chart" aria-hidden="true"></i>&nbsp;Corrispettivi </th>
      <th colspan="2" style="text-align: center" > <i class="fa fa-file-text" aria-hidden="true"></i>&nbsp;Fatturazione </th>
      <th rowspan="2" style="text-align: center" > <i class="fa fa-eur" aria-hidden="true"></i>&nbsp;Incassi </th>
      <th  rowspan="2" colspan="2" style="text-align: center" > <i class="fa fa-check" aria-hidden="true"></i>&nbsp;Controllo<sup>***</sup> </th>
    </tr>
    <tr data-dt-order="disable">
      <th style="text-align: center" >TFO<span class="tfo-rate-indicator"></span></th>
      <th style="text-align: center" > PUN </th>
      <th style="text-align: center" > TFO<sup>**</sup></th>
      <th style="text-align: center" > Energia non incentivata </th>
    </tr>
  </thead>
	<tbody>
		<!-- Add your rows here -->
		<tr>
			<td>Gennaio</td>
			<td><input type="number" class="form-control table-input energy-input" data-mese="1" data-campo="energia_kwh"></td>
			<td class="tfo-value" data-mese="1"></td>
			<td class="pun-value" data-mese="1"></td>
			<td><input type="number" class="form-control table-input" data-mese="1" data-campo="fatturazione_tfo"></td>
			<td><input type="number" class="form-control table-input" data-mese="1" data-campo="fatturazione_altro"></td>
			<td><input type="number" class="form-control table-input" data-mese="1" data-campo="incassi"></td>
			<td class="controllo-scarto" data-mese="1"></td>
			<td class="controllo-percentuale" data-mese="1"></td>
		</tr>
		<tr>
			<td>Febbraio</td>
			<td><input type="number" class="form-control table-input energy-input" data-mese="2" data-campo="energia_kwh"></td>
			<td class="tfo-value" data-mese="2"></td>
			<td class="pun-value" data-mese="2"></td>
			<td><input type="number" class="form-control table-input" data-mese="2" data-campo="fatturazione_tfo"></td>
			<td><input type="number" class="form-control table-input" data-mese="2" data-campo="fatturazione_altro"></td>
			<td><input type="number" class="form-control table-input" data-mese="2" data-campo="incassi"></td>
			<td class="controllo-scarto" data-mese="2"></td>
			<td class="controllo-percentuale" data-mese="2"></td>
		</tr>
		<tr>
			<td>Marzo</td>
			<td><input type="number" class="form-control table-input energy-input" data-mese="3" data-campo="energia_kwh"></td>
			<td class="tfo-value" data-mese="3"></td>
			<td class="pun-value" data-mese="3"></td>
			<td><input type="number" class="form-control table-input" data-mese="3" data-campo="fatturazione_tfo"></td>
			<td><input type="number" class="form-control table-input" data-mese="3" data-campo="fatturazione_altro"></td>
			<td><input type="number" class="form-control table-input" data-mese="3" data-campo="incassi"></td>
			<td class="controllo-scarto" data-mese="3"></td>
			<td class="controllo-percentuale" data-mese="3"></td>
		</tr>
		<tr>
			<td>Aprile</td>
			<td><input type="number" class="form-control table-input energy-input" data-mese="4" data-campo="energia_kwh"></td>
			<td class="tfo-value" data-mese="4"></td>
			<td class="pun-value" data-mese="4"></td>
			<td><input type="number" class="form-control table-input" data-mese="4" data-campo="fatturazione_tfo"></td>
			<td><input type="number" class="form-control table-input" data-mese="4" data-campo="fatturazione_altro"></td>
			<td><input type="number" class="form-control table-input" data-mese="4" data-campo="incassi"></td>
			<td class="controllo-scarto" data-mese="4"></td>
			<td class="controllo-percentuale" data-mese="4"></td>
		</tr>
		<tr>
			<td>Maggio</td>
			<td><input type="number" class="form-control table-input energy-input" data-mese="5" data-campo="energia_kwh"></td>
			<td class="tfo-value" data-mese="5"></td>
			<td class="pun-value" data-mese="5"></td>
			<td><input type="number" class="form-control table-input" data-mese="5" data-campo="fatturazione_tfo"></td>
			<td><input type="number" class="form-control table-input" data-mese="5" data-campo="fatturazione_altro"></td>
			<td><input type="number" class="form-control table-input" data-mese="5" data-campo="incassi"></td>
			<td class="controllo-scarto" data-mese="5"></td>
			<td class="controllo-percentuale" data-mese="5"></td>
		</tr>
		<tr>
			<td>Giugno</td>
			<td><input type="number" class="form-control table-input energy-input" data-mese="6" data-campo="energia_kwh"></td>
			<td class="tfo-value" data-mese="6"></td>
			<td class="pun-value" data-mese="6"></td>
			<td><input type="number" class="form-control table-input" data-mese="6" data-campo="fatturazione_tfo"></td>
			<td><input type="number" class="form-control table-input" data-mese="6" data-campo="fatturazione_altro"></td>
			<td><input type="number" class="form-control table-input" data-mese="6" data-campo="incassi"></td>
			<td class="controllo-scarto" data-mese="6"></td>
			<td class="controllo-percentuale" data-mese="6"></td>
		</tr>
		<tr>
			<td>Luglio</td>
			<td><input type="number" class="form-control table-input energy-input" data-mese="7" data-campo="energia_kwh"></td>
			<td class="tfo-value" data-mese="7"></td>
			<td class="pun-value" data-mese="7"></td>
			<td><input type="number" class="form-control table-input" data-mese="7" data-campo="fatturazione_tfo"></td>
			<td><input type="number" class="form-control table-input" data-mese="7" data-campo="fatturazione_altro"></td>
			<td><input type="number" class="form-control table-input" data-mese="7" data-campo="incassi"></td>
			<td class="controllo-scarto" data-mese="7"></td>
			<td class="controllo-percentuale" data-mese="7"></td>
		</tr>
		<tr>
			<td>Agosto</td>
			<td><input type="number" class="form-control table-input energy-input" data-mese="8" data-campo="energia_kwh"></td>
			<td class="tfo-value" data-mese="8"></td>
			<td class="pun-value" data-mese="8"></td>
			<td><input type="number" class="form-control table-input" data-mese="8" data-campo="fatturazione_tfo"></td>
			<td><input type="number" class="form-control table-input" data-mese="8" data-campo="fatturazione_altro"></td>
			<td><input type="number" class="form-control table-input" data-mese="8" data-campo="incassi"></td>
			<td class="controllo-scarto" data-mese="8"></td>
			<td class="controllo-percentuale" data-mese="8"></td>
		</tr>
		<tr>
			<td>Settembre</td>
			<td><input type="number" class="form-control table-input energy-input" data-mese="9" data-campo="energia_kwh"></td>
			<td class="tfo-value" data-mese="9"></td>
			<td class="pun-value" data-mese="9"></td>
			<td><input type="number" class="form-control table-input" data-mese="9" data-campo="fatturazione_tfo"></td>
			<td><input type="number" class="form-control table-input" data-mese="9" data-campo="fatturazione_altro"></td>
			<td><input type="number" class="form-control table-input" data-mese="9" data-campo="incassi"></td>
			<td class="controllo-scarto" data-mese="9"></td>
			<td class="controllo-percentuale" data-mese="9"></td>
		</tr>
		<tr>
			<td>Ottobre</td>
			<td><input type="number" class="form-control table-input energy-input" data-mese="10" data-campo="energia_kwh"></td>
			<td class="tfo-value" data-mese="10"></td>
			<td class="pun-value" data-mese="10"></td>
			<td><input type="number" class="form-control table-input" data-mese="10" data-campo="fatturazione_tfo"></td>
			<td><input type="number" class="form-control table-input" data-mese="10" data-campo="fatturazione_altro"></td>
			<td><input type="number" class="form-control table-input" data-mese="10" data-campo="incassi"></td>
			<td class="controllo-scarto" data-mese="10"></td>
			<td class="controllo-percentuale" data-mese="10"></td>
		</tr>
		<tr>
			<td>Novembre</td>
			<td><input type="number" class="form-control table-input energy-input" data-mese="11" data-campo="energia_kwh"></td>
			<td class="tfo-value" data-mese="11"></td>
			<td class="pun-value" data-mese="11"></td>
			<td><input type="number" class="form-control table-input" data-mese="11" data-campo="fatturazione_tfo"></td>
			<td><input type="number" class="form-control table-input" data-mese="11" data-campo="fatturazione_altro"></td>
			<td><input type="number" class="form-control table-input" data-mese="11" data-campo="incassi"></td>
			<td class="controllo-scarto" data-mese="11"></td>
			<td class="controllo-percentuale" data-mese="11"></td>
		</tr>
		<tr>
			<td>Dicembre</td>
			<td><input type="number" class="form-control table-input energy-input" data-mese="12" data-campo="energia_kwh"></td>
			<td class="tfo-value" data-mese="12"></td>
			<td class="pun-value" data-mese="12"></td>
			<td><input type="number" class="form-control table-input" data-mese="12" data-campo="fatturazione_tfo"></td>
			<td><input type="number" class="form-control table-input" data-mese="12" data-campo="fatturazione_altro"></td>
			<td><input type="number" class="form-control table-input" data-mese="12" data-campo="incassi"></td>
			<td class="controllo-scarto" data-mese="12"></td>
			<td class="controllo-percentuale" data-mese="12"></td>
		</tr>
		<tr>
			<td><b>Anno</b></td>
			<td class="totale-energia"></td>
			<td class="totale-corrispettivo-incentivo"></td>
			<td class="totale-pun"></td>
			<td class="totale-fatturazione-tfo"></td>
			<td class="totale-fatturazione-altro"></td>
			<td class="totale-incassi"></td>
			<td class="totale-controllo-scarto"></td>
			<td class="totale-controllo-percentuale"></td>
		</tr>
	</tbody>
	<tfoot>

	<tr>
		<td></td>
    <td colspan="2"><sup>*</sup>Energia incentivata </td>
		<td colspan="2"><sup>**</sup>Tariffa Fissa Omnicomprensiva</td>
    <td colspan="4"><sup>***</sup>Scarto e variazione percentuale tra "Corrispettivi" e "Fatturazione"</td>
		
	</tr>
	</tfoot>
</table>

<div class="text-center mt-3">
	<button id="save-table-data-{{ anno }}" class="btn btn-primary">Salva Dati</button>
</div>

<!-- Alert per messaggi di successo/errore specifici per anno -->
<div id="success-alert-{{ anno }}" class="alert alert-success mt-3" style="display: none;" role="alert">
	Dati salvati con successo!
</div>
<div id="error-alert-{{ anno }}" class="alert alert-danger mt-3" style="display: none;" role="alert">
	Errore durante il salvataggio dei dati.
</div>
{% block extra_js %}
<script src="{% static 'js/tabellacorrispettivi.js' %}"></script>
{% endblock %}